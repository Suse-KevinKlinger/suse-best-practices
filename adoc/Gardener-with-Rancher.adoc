:docinfo:

:gardener: Gardener
:rancher: Rancher
:harvester: Harvester
:longhorn: Longhorn

// TODO Gardener pictures license?
= Benefits of using {rancher} with {gardener}

== Introduction

This whitepaper will give an overview of what is {gardener}, what is {rancher}, how they differ from each other and what they have in common.
In the end it will show that using both solutions not necessarily compete with each other but can be used to complement each other to give the ultimate Kubernetes experience.

++++
<?pdfpagebreak?>
++++
== What is {gardener}

"`Deliver fully-managed clusters at scale everywhere with your own Kubernetes-as-a-Service`" that's what can be found when calling 
link:https://gardener.cloud/[the official {gardener} homepage].

When taking a look on that quote, you can see that {gardener} is designed to provision and manage Kubernetes infrastructure.

When working with Kubernetes, the clusters have to be managed, monitored, updated and operated.
This may be easy when having a smaller set of clusters, but the more it gets, the bigger is the workload of handling those clusters.
That's where {gardener} comes into play. The modular design of {gardener} allows to adjust the cluster configuration and to bring up as many homogeneous clusters as desired.

Those will then have a built in management components that will, for instance, recreate Kubernetes nodes if they're misbehaving.

=== Concepts

{gardener} differs between three different types of clusters.

* Garden Cluster
* Seed Cluster
* Shoot Cluster

The Garden Cluster holds the control plane components.

The seed clusters are holding the control plane that's shared with every shoot cluster.
Its needed at least once per IaaS region.

A seed cluster is an empty Kubernetes cluster used to be extended via the integrated node provisioning feature. The seed cluster creates an empty infrastructure which can then be managed with the resources and tools provided by the platform. It provides an easy way of setting up and managing the nodes in a Kubernetes environment.


The shoot clusters are the ones to be consumed by the end user and only consists of Kubernetes Worker nodes.
A shoot cluster is a Kubernetes cluster which consists of all the components required to run applications. It contains the necessary nodes to host and run applications, as well as other resources such as storage and networking, that are necessary in order to deploy and manage applications.


.Gardener Cluster Types
[#img-ID, link=https://github.com/gardener/gardener/blob/master/docs/concepts/images/gardener-architecture-overview.png]
image::Gardener_Cluster_Types.png[title="Gardener Cluster Types (origin: https://google.com)", scaledwidth=99%]

// image::Gardener_Cluster_Types.png[title="Gardener Cluster Types",scaledwidth=99%, link=https://github.com/gardener/gardener/blob/master/docs/concepts/images/gardener-architecture-overview.png]

The main usage of the dashboard {gardener} offers is to overview and deploy Kubernetes clusters.

image::Gardener_Cluster_Overview.png[title="Gardener Dashboard",scaledwidth=99%]


Depending on the installed extensions and seed clusters, you can set up shoot clusters at the given Hyperscalers 
and with different configurations. An example of how this may look like can be seen in <<gardener_cluster_creation>>:

image::Gardener_Cluster_Creation.png[title="Gardener Cluster Creation",scaledwidth=99%, id=gardener_cluster_creation]


The probably more efficient way to set up shoots in larger scale is to do it the Kubernetes way.
Saying that it means, you'll use kubectl to apply a YAML file holding the definition of a shoot cluster.
By that a single file is needed to spin up all required components to create a Kubernetes environment and if desired, the deployment of the workloads can be put into the same file.

++++
<?pdfpagebreak?>
++++
The guiding principle of {gardener} is doing things the Kubernetes way. This can be recognized when having a look at the architecture overview.
The Seed clusters are virtual Kubernetes clusters that share their control plane components with multiple shoot clusters.
This means that the Seed is actually a Kubernetes server running in a Kubernetes cluster. The possibility to deploy further resources like additional clusters or networks, substantiate this principle.

image::Gardener_Architecture.png[title="Gardener Architecture",scaledwidth=99%]


++++
<?pdfpagebreak?>
++++
== What is {rancher}

{rancher} is a open-source management tool for Kubernetes landscapes, which simplifies the administration of Kubernetes clusters and allows to navigate through your Kubernetes landscape using a well designed user interface.
It is compatible for single node clusters up to enterprise environments holding hundreds of nodes divided among a set of Kubernetes clusters.

But what does that mean for the Kubernetes user?

Administrators benefit from features like the built in user management or the easy and guided way to setup new Kubernetes clusters. The Terraform provider of {rancher} gives also the opportunity to manage {rancher} itself or 


Developers benefit from features that will give them a central entry point to the Kubernetes workloads.
The cluster explorer provides a graphical management tool with clear overview of what's going on in the given cluster and many other helpful features that can help Kubernetes users to manage their resources.

++++
<?pdfpagebreak?>
++++

Fleet is {rancher}'s GitOps tool. It allows to connect Git repositories and to trigger automatic rollouts to pre configured clusters. Furthermore, it's configurable which branch of a repository should be tracked. By that it's simple to trigger rollouts for different type of clusters, like for development, testing or production.  


image::rancher_fleet.png[title="Rancher Fleet",scaledwidth=99%]

++++
<?pdfpagebreak?>
++++

The marketplace offers a visually guided way to deploy and manage Helm deployments for the given clusters.
By default, {rancher} delivers a catalog of widely used applications that can be extended by adding custom repositories.

image::rancher_marketplace.png[title="Rancher Marketplace",scaledwidth=99%]

++++
<?pdfpagebreak?>
++++

All Apps in the catalog offer more Chart Information and a guided setup where configuration parameters can be changed using UI elements. The following picture shows an example of a {longhorn} configuration in {rancher}.

image::rancher_longhorn_app.png[title="Longhorn App configuration", scaledwidth=99%]

As seen, the configuration can easily changed using elements as checkboxes or dropdown selections.
All information for selections and possible fields and their types are stored at 
link:https://github.com/rancher/partner-charts[{rancher}'s partner-charts repository].


The most easy way to add custom Helm charts to the marketplace is to add a repository.
Therefore the repository address of the Helm chart needs to be entered and if desired, those can be configured using a special branch.
After that the custom application can be deployed and managed using the marketplace - even though without the pre configured selections.


For those who want to test {rancher}, the probably easiest method to get some first impressions is to deploy it locally using docker. 
How to do that is described 
link:https://rancher.com/docs/rancher/v2.6/en/installation/other-installation-methods/single-node-docker/[here].



++++
<?pdfpagebreak?>
++++

== Comparison
To get a first impression of how both solutions differ, let's take a look at the feature offering.

=== Feature overview
[options="header", width=99%]
|===
|Feature | {rancher} | {gardener}
|Maintenance windows| no | yes
|Automated hibernation| no | yes
|Self healing| no | yes
|Horizontal scaling| no | yes
|User management| yes | yes
|Marketplace apps| yes | no
|GitOps | yes | no
|===

=== Strengths {rancher}

The main strength of {rancher} is clearly the Kubernetes dashboard (Cluster Manager) and by that the focus on managing workloads on top of a running Kubernetes cluster.
Features like Fleet (GitOps) and the marketplace complete the overall impression of a user friendly and easy way to interact with Kubernetes clusters.

=== Strengths {gardener}

Looking at the features and the idea of "Kubernetes-as-a-Service", you can see, that the main focus of {gardener} is to provision and manage the infrastructure of Kubernetes clusters.

Features as the configurable maintenance windows or the automated hibernation can help administrators to save costs to run Kubernetes clusters and keeping them up to date.
With the feature of self healing clusters, {gardener} can reduce the load of administrators.



== Better together

Looking at both solutions, you could see that {gardener} has its main focus on serving infrastructure and take care that, while {rancher} focuses on the workload running on top of a Kubernetes cluster.

Bringing {rancher} and {gardener} together can bundle synergies and provide the strengths of two solutions to the end users.
For that you could deploy Kubernetes clusters using {gardener} to benefit from features like scheduled hibernation, maintenance windows and the self healing clusters.

After the cluster is deployed, it will be connected to {rancher}, which will bring benefits in terms of a user friendly interface to deploy and manage the Kubernetes applications.
{rancher} fleet offers a GitOps tooling which can then also be used in order to make deployment to the Kubernetes clusters easier for end users.
For even more automation, {rancher}'s Terraform provider could be used. 
